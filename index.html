<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="theme-color" content="#6c7bff" />
  <link rel="manifest" href="manifest.json" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Curse Energy Damage Calculator</title>

  <!-- Lexend Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Lexend', system-ui, sans-serif;
      background: #0f1220;
      color: #eaeaf0;
      padding: 20px;
      max-width: 700px;
      margin: auto;
    }
    h1 { font-size: 1.6rem; }
    .box {
      background: #1a1d35;
      border-radius: 16px;
      padding: 16px;
      margin-bottom: 16px;
    }
    label { display: block; margin-top: 10px; }
    input {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 8px;
      border: none;
      font-family: 'Lexend', sans-serif;
    }
    button {
      margin-top: 14px;
      padding: 10px;
      width: 100%;
      border-radius: 10px;
      border: none;
      background: #6c7bff;
      color: white;
      font-size: 1rem;
      font-family: 'Lexend', sans-serif;
    }
    .result span { font-weight: 600; }
    .formula {
      font-family: monospace;
      background: #0c0e1a;
      padding: 12px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h1>Curse‑Energy‑Scaled Damage Calculator</h1>

<div class="box">
  <h3>Formula Used</h3>
  <div class="formula">
    D = B + B · ((R − 1) / 9) · U<sup>1/R</sup><br/>
    R = min(CE / CE<sub>min</sub>, 10)
  </div>
</div>

<div class="box">
  <h3>Inputs</h3>
  <label>Base Damage (B)
    <input id="base" type="number" value="4" />
  </label>
  <label>Minimum Curse Energy Cost (CE<sub>min</sub>)
    <input id="minmana" type="number" value="50" />
  </label>
  <label>Curse Energy Spent (CE)
    <input id="mana" type="number" value="250" />
  </label>
</div>

<div class="box">
  <button onclick="roll()">Roll Damage</button>
</div>

<div class="box result">
  <h3>Results</h3>
  <p>Minimum Output: <span id="minOut">–</span></p>
  <p>Maximum Possible Output: <span id="maxOut">–</span></p>
  <p>Rolled Output: <span id="finalOut">–</span></p>
</div>

<script>
function roll() {
  const B = parseFloat(base.value);
  const CEmin = parseFloat(minmana.value);
  const CE = parseFloat(mana.value);

  const R = Math.min(CE / CEmin, 10);
  const U = Math.random();

  const minOutput = B;
  const maxOutput = B + B * ((R - 1) / 9);
  const damage = B + B * ((R - 1) / 9) * Math.pow(U, 1 / R);

  minOut.textContent = minOutput.toFixed(1);
  maxOut.textContent = maxOutput.toFixed(1);
  finalOut.textContent = damage.toFixed(1);
}
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js');
  });
}
</script>

</body>
</html>
